<style>
    @import url(https://fonts.googleapis.com/css?family=BenchNine:700);
    body {
        background-color: #212121;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-flow: wrap;
        margin: 0;
        height: 100%;
    }
    .btn1 {
        background-color: #c47135;
        border: none;
        color: #ffffff;
        cursor: pointer;
        display: inline-block;
        font-family: 'BenchNine', Arial, sans-serif;
        font-size: 1em;
        font-size: 22px;
        line-height: 1em;
        margin: 15px 40px;
        outline: none;
        padding: 12px 40px 10px;
        position: relative;
        text-transform: uppercase;
        font-weight: 700;
    }
    .btn1:before,
    .btn1:after {
        border-color: transparent;
        -webkit-transition: all 0.25s;
        transition: all 0.25s;
        border-style: solid;
        border-width: 0;
        content: "";
        height: 24px;
        position: absolute;
        width: 24px;
    }
    .btn1:before {
        border-color: #c47135;
        border-right-width: 2px;
        border-top-width: 2px;
        right: -5px;
        top: -5px;
    }
    .btn1:after {
        border-bottom-width: 2px;
        border-color: #c47135;
        border-left-width: 2px;
        bottom: -5px;
        left: -5px;
    }
    .btn1:hover,
    .btn1.hover {
        background-color: #c47135;
    }
    .btn1:hover:before,
    .btn1.hover:before,
    .btn1:hover:after,
    .btn1.hover:after {
        height: 100%;
        width: 100%;
    }

    #container {
        margin: 0px auto;
        width: 500px;
        height: 375px;
        border: 10px #333 solid;
    }
    #videoElement {
        width: 500px;
        height: 375px;
        background-color: #666;
    }
</style>
     
    <body>
        <div>
        <div id="container">
            <video autoplay="true" id="videoElement">
            
            </video>
        </div>
        <div style="text-align: center;">
            <button class="btn1" id="clicker">Capture your face!</button>
        </div>
        <canvas id="canvas" width="500" height="375"></canvas>
        
        <button class="btn1" onclick="location.href = 'show_map'">판별하기</button>
    </div>
    </body>

<script>
    var video = document.querySelector("#videoElement");
    
    if (navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
          video.srcObject = stream;
        })
        .catch(function (err0r) {
          console.log("Something went wrong!");
        });
    }

    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');
    var video = document.querySelector("#videoElement");

    document.getElementById("clicker").addEventListener("click", function() {
      context.drawImage(video, 0, 0, 500, 375);

      // get image data as string
      const imageString = canvas.toDataURL();

      // send image to server
      fetch('/show_map', {
        method: "POST",
        cache: "no-cache",
        credentials: "same-origin",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({
          imageString: imageString, 
        }),
      })
    });

    $(".hover").mouseleave(
      function() {
        $(this).removeClass("hover");
      }
    );
</script>
